<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>mySquareMeal - Restaurants</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<!--[if ie]><meta content='IE=8' http-equiv='X-UA-Compatible'/><![endif]-->
	<!-- bootstrap -->
	<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
	<link href="themes/css/bootstrappage.css" rel="stylesheet" />

	<!-- global styles -->
	<link href="themes/css/flexslider.css" rel="stylesheet" />
	<link href="themes/css/main.css" rel="stylesheet" />

	<!-- scripts -->
	<script
			src="https://code.jquery.com/jquery-3.3.1.min.js"
			integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			crossorigin="anonymous"></script>
	<script src="bootstrap/js/bootstrap.min.js"></script>
	<script src="themes/js/superfish.js"></script>
	<script src="themes/js/jquery.scrolltotop.js"></script>
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<script src="js/respond.min.js"></script>
	<![endif]-->
	<script>

        $(function() {

            var div = $('#r_details');
            var ul = $('#r_list');
            var r_data = [];

            $.getJSON("http://localhost:63342/295%20Project/api/response.json?", function(data) {
                $.each(data, function(i, f) {
                    r_data.push([f.restaurant_name, f.address.street_address, f.address.city, f.address.zip, f.menu_data]);
                    ul.append('<li class="span3"><div class="product-box"><span class="sale_tag"></span><br/><a class = "r_anchor" href="#' + i + '">' + f.restaurant_name + '</a><br/></div>')
                });
                $('.r_anchor').on('click', addContent);
            });

            function addContent(e) {
                $("#r_details").html("");
                e.preventDefault();
                var hash = this.hash.replace('#','');
                div.html('');
                div.append('<p><b>Name:</b> ' + r_data[hash][0] + '</p>');
                div.append('<p><b>Address:</b> ' + r_data[hash][1] + ", " + r_data[hash][2] + ", " + r_data[hash][3] + '</p>');
                div.append('<p><b>Menu:</b> ' + '</p>');
                for (i = 0 ; i < r_data[hash][4].length ; i++) {
                    div.append('<p>'
                        +
                        r_data[hash][4][i]
                        +
                        '</p>');
                }
            }
        });

	</script>
</head>

<body>
<div id="top-bar" class="container">
	<div class="row"></div>
	<div class="span11">
		<div class="account pull-left ">
			<img src="themes/images/logo.png" width=50% height=50% alt="logo"> </img>
		</div>
		<div class="account pull-right">
			<ul class="user-menu">
				<li><a href="home.html">Home</a></li>
				<li><a href="profile.html">Profile</a></li>
				<li><a href="mapview.html">Switch to Map View</a></li>
				<li><a href="welcome.html">Logout</a></li>
			</ul>
		</div>
	</div>
</div>
<div id="wrapper" class="container">

	<section class="main-content">

			<div class="row">
			<div class="span12">
				<ul class="thumbnails listing-products" id = "r_list" data-role="listview">
					<!--<li class="span3">-->
						<!--<div class="product-box">-->
							<!--<span class="sale_tag"></span>-->
							<!--<a href="product_detail.html" class="title"><div id = "r_name"></div></a><br/>-->
						<!--</div>-->
					<!--</li>-->
				</ul>
				<div id = r_details class = "text-center"></div>
			</div>
		</div>
	</section>
	<section id="copyright">
		<span>copyright Mandar Gade, Neha Kumar, Varun Shah, Setu Pandya, San Jose State University</span>
	</section>
</div>
<script src="themes/js/common.js"></script>
</body>

</html>